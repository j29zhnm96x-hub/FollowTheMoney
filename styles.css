/* FollowTheMoney vanilla styles */
:root {
  --income: #30d6a4;
  --expense: #ff4f6a;
  --accent: #6580ff;
  --bg: #0f1024;
  --fg: #f3f5ff;
  --panel: rgba(32,34,74,0.85);
  --panel-border: rgba(112,118,196,0.45);
  --topbar-bg: rgba(26,26,32,0.9);
  --input-bg: rgba(18,20,48,0.85);
  --input-border: rgba(255,255,255,0.25);
  --modal-bg: rgba(14,15,34,0.95);
  --sheet-bg: rgba(12,12,28,0.98);
  --muted: rgba(243,245,255,0.65);
  --radius-xl: 28px;
  --radius-lg: 18px;
  --topbar-offset: 8rem; /* ensures content clears the fixed header on all screens */
  --settings-gap: 1.2rem;
  --settings-card-padding: 1.25rem;
  --settings-grid-min: 18rem;
  --income-tint: rgba(48,214,164,0.18);
  --income-outline: rgba(48,214,164,0.6);
  --expense-tint: rgba(255,79,106,0.18);
  --expense-outline: rgba(255,79,106,0.6);
  --all-tint: rgba(101,128,255,0.15);
  --all-outline: rgba(101,128,255,0.55);
  font-family: system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Ubuntu,sans-serif;
}
html.theme-light {
  --income: #49b98c;
  --expense: #d26640;
  --accent: #a37dff;
  --bg: #f7f2e8;
  --fg: #3b2c1d;
  --panel: rgba(255,255,255,0.92);
  --panel-border: rgba(177,153,120,0.4);
  --topbar-bg: rgba(228,213,255,0.95);
  --input-bg: rgba(255,255,255,0.9);
  --input-border: rgba(177,153,120,0.6);
  --modal-bg: rgba(255,255,255,0.98);
  --sheet-bg: rgba(255,255,255,0.98);
  --muted: rgba(59,44,29,0.7);
  --income-tint: rgba(73,185,140,0.22);
  --income-outline: rgba(73,185,140,0.55);
  --expense-tint: rgba(210,102,64,0.18);
  --expense-outline: rgba(210,102,64,0.55);
  --all-tint: rgba(163,125,255,0.2);
  --all-outline: rgba(163,125,255,0.5);
}
* { box-sizing: border-box; margin: 0; padding: 0; }
body { margin:0; background:var(--bg); color:var(--fg); -webkit-font-smoothing:antialiased; overflow:hidden; }
/* Prevent double-tap to zoom on supporting browsers: prefer touch-action and a small JS guard.
  Note: disabling zoom via viewport can impact accessibility; we've added JS guard instead but
  also set touch-action on interactive controls for better gesture handling. */
html, body { -ms-touch-action: manipulation; touch-action: manipulation; }
.app { min-height:100vh; position:relative; overflow:hidden; }
.screen {
  min-height:100vh;
  height:100vh;
  padding:calc(var(--topbar-offset) + env(safe-area-inset-top)) 1.25rem calc(7rem + env(safe-area-inset-bottom));
  transition:opacity .3s ease;
  overflow-y:auto;
  scroll-padding-top:calc(var(--topbar-offset) + env(safe-area-inset-top));
}
#screen-home { overflow:hidden; padding-bottom:calc(7rem + env(safe-area-inset-bottom)); }
.screen.active { opacity:1; }
.top-bar { display:flex; align-items:center; justify-content:space-between; padding:1.25rem .25rem 1rem; gap:.5rem; position:fixed; top:0; left:0; right:0; z-index:30; background:var(--topbar-bg); -webkit-backdrop-filter:blur(8px); backdrop-filter:blur(8px); }
.logo { font-size:1.35rem; font-weight:800; letter-spacing:-.3px; margin:0; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.pill { border:none; cursor:pointer; font-weight:600; padding:.7rem 1.2rem; border-radius:999px; font-size:.85rem; transition:all .2s ease; white-space:nowrap; }
.pill, .btn, .circle { touch-action: manipulation; }
/* Prevent long-press selection and callout on non-form UI elements */
html, body, .app, .screen, .top-bar, .transaction, .recent-item, .balance, .logo { -webkit-user-select: none; user-select: none; -webkit-touch-callout: none; }
/* Allow selection in text inputs and textareas */
.text-input, .note-container textarea, input[type='tel'], textarea { -webkit-user-select: text; user-select: text; -webkit-touch-callout: text; }
.pill:active { transform:scale(.95); }
.pill.accent { background:var(--accent); color:#fff; }
.pill.accent:hover { filter:brightness(.92); }
.pill.ghost { background:transparent; color:var(--accent); }
.hidden-placeholder { visibility:hidden; }
.center-stack { display:flex; flex-direction:column; align-items:center; justify-content:flex-start; margin-top:0; min-height:0; padding-top:1rem; overflow:hidden; }
.balance { font-size:clamp(3rem, 12vw, 5.5rem); font-weight:900; font-variant-numeric:tabular-nums; letter-spacing:-3px; line-height:1; text-align:center; padding:0 1rem; word-break:break-all; }
@media (min-width:600px){ .balance { font-size:clamp(5rem, 10vw, 7rem); } }
.balance-label { margin-bottom:.5rem; font-size:.9rem; text-transform:uppercase; letter-spacing:1px; font-weight:500; color:var(--muted); }
.badge { display:inline-block; margin-left:.5rem; padding:.2rem .5rem; font-size:.65rem; font-weight:800; letter-spacing:.3px; border-radius:999px; background:var(--panel); border:1px solid var(--panel-border); vertical-align:middle; color:var(--fg); }
.recent-list { width:100%; max-width:560px; margin-top:0.9rem; display:flex; flex-direction:column; gap:0.45rem; padding:0 1rem; }
.dashboard-grid { width:100%; max-width:560px; margin:0.9rem auto 0; display:grid; grid-template-columns:repeat(3,1fr); gap:.6rem; padding:0 1rem; }
.dashboard-card { background:var(--panel); -webkit-backdrop-filter:blur(8px); backdrop-filter:blur(8px); border:1px solid var(--panel-border); border-radius:14px; padding:.75rem .5rem; display:flex; flex-direction:column; align-items:center; gap:.3rem; cursor:pointer; transition:all .2s ease; touch-action:manipulation; }
.dashboard-card:active { transform:scale(.97); background:rgba(255,255,255,.12); }
.dashboard-card .card-label { font-size:.7rem; text-transform:uppercase; letter-spacing:.5px; font-weight:700; opacity:.6; margin-bottom:.1rem; }
.dashboard-card .card-allowance { color:var(--income); font-size:.85rem; font-weight:800; text-align:center; word-break:break-word; }
.dashboard-card .card-spent { color:var(--expense); font-size:.85rem; font-weight:800; text-align:center; word-break:break-word; }
.recent-item { background:var(--panel); -webkit-backdrop-filter:blur(8px); backdrop-filter:blur(8px); border:1px solid var(--panel-border); border-radius:14px; padding:.5rem .75rem; display:flex; align-items:center; justify-content:space-between; font-size:.95rem; gap:.6rem; }
.recent-item.press-flash { animation:recentPressFlash .22s ease-out; }
.recent-item .r-title { font-weight:700; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; opacity:0.95; }
.recent-item .r-meta { font-size:.75rem; opacity:.55; margin-left:.5rem; }
.recent-item .r-amt { font-weight:800; font-variant-numeric:tabular-nums; white-space:nowrap; }
.float-buttons { position:fixed; bottom:calc(4.5rem + env(safe-area-inset-bottom)); left:0; right:0; display:flex; justify-content:center; gap:4rem; padding:0 2rem; z-index:10; }
.circle { width:5.5rem; height:5.5rem; border-radius:50%; font-size:3.5rem; line-height:1; font-weight:900; display:flex; align-items:center; justify-content:center; border:none; cursor:pointer; box-shadow:0 10px 30px rgba(0,0,0,.5); transition:all .2s cubic-bezier(.4,0,.2,1); background-size:55%; background-position:center; background-repeat:no-repeat; }
.circle.income { background-color:var(--income); background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23000' stroke-width='2.5' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M12 19V5M5 12l7-7 7 7'/%3E%3C/svg%3E"); }
.circle.expense { background-color:var(--expense); background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23fff' stroke-width='2.5' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M12 5v14M5 12l7 7 7-7'/%3E%3C/svg%3E"); }
.circle:active { transform:scale(.92); box-shadow:0 5px 15px rgba(0,0,0,.4); }
@media (min-width:600px){ .circle { width:6rem; height:6rem; font-size:4rem; } .float-buttons { gap:5rem; } }
.history-filter { margin:0 1.25rem 0.2rem; padding:.6rem 1rem; background:var(--panel); border:1px solid var(--panel-border); border-radius:14px; font-size:.8rem; text-align:center; font-weight:600; opacity:.8; }
.history-list { display:flex; flex-direction:column; gap:.85rem; padding:1rem 0 2rem; }
.transaction { background:var(--panel); -webkit-backdrop-filter:blur(12px); backdrop-filter:blur(12px); border:1px solid var(--panel-border); border-radius:var(--radius-xl); padding:1.1rem 1.3rem; display:flex; align-items:center; justify-content:space-between; position:relative; overflow:hidden; transition:transform .2s ease; touch-action:pan-y; }
.transaction .left { display:flex; flex-direction:column; flex:1; min-width:0; gap:.15rem; }
.transaction .title { font-weight:600; font-size:.95rem; margin-bottom:.25rem; }
.transaction .meta { font-size:.7rem; opacity:.5; margin-top:.15rem; }
.amount-pos { color:var(--income); font-weight:800; font-size:1.05rem; font-variant-numeric:tabular-nums; white-space:nowrap; }
.amount-neg { color:var(--expense); font-weight:800; font-size:1.05rem; font-variant-numeric:tabular-nums; white-space:nowrap; }
.transaction .actions { display:flex; align-items:center; gap:.6rem; flex-shrink:0; }
.edit-btn { border:none; background:rgba(255,255,255,.15); color:inherit; width:2.1rem; height:2.1rem; border-radius:999px; display:flex; align-items:center; justify-content:center; font-size:1rem; cursor:pointer; transition:background .2s ease, transform .2s ease; }
.edit-btn.note-outline { border:1px solid var(--expense); }
.edit-btn:active { transform:scale(.92); }
.theme-light .edit-btn { background:rgba(0,0,0,.08); }
.swipe-delete { position:absolute; inset:0; display:flex; justify-content:flex-end; align-items:center; padding-right:1.25rem; font-weight:700; color:var(--expense); pointer-events:none; }
.transaction.flash-highlight { animation:historyFlash .75s ease-out 2; }
.modal { position:fixed; inset:0; z-index:50; animation:fadeIn .25s ease; }
.modal-overlay { position:absolute; inset:0; background:rgba(0,0,0,.65); cursor:pointer; }
.modal-panel { position:absolute; top:5rem; left:1.25rem; right:1.25rem; max-width:500px; margin:0 auto; background:var(--modal-bg); -webkit-backdrop-filter:blur(20px); backdrop-filter:blur(20px); border:1px solid var(--panel-border); border-radius:var(--radius-xl); padding:1.5rem 1.4rem 2rem; display:flex; flex-direction:column; gap:1.2rem; box-shadow:0 20px 60px rgba(0,0,0,.6); animation:slideUp .3s cubic-bezier(.4,0,.2,1); max-height:calc(90vh - 4rem); overflow-y:auto; }
.settings-body { display:flex; flex-direction:column; gap:var(--settings-gap); }
.settings-grid { display:flex; flex-direction:column; gap:var(--settings-gap); }
@media (min-width:640px){ .settings-grid { display:grid; grid-template-columns:repeat(auto-fit,minmax(var(--settings-grid-min),1fr)); } }
.settings-card { background:var(--panel); border:1px solid var(--panel-border); border-radius:var(--radius-lg); padding:var(--settings-card-padding); display:flex; flex-direction:column; gap:var(--settings-gap); }
.settings-card h3 { margin:0; font-size:1.15rem; font-weight:800; letter-spacing:-.2px; }
.settings-card .card-subtitle { font-size:.85rem; opacity:.7; margin-top:.15rem; }
.settings-card .setting-row { padding:0; }
.settings-card .preview.small { margin-top:0; }
.settings-actions { display:flex; flex-direction:column; gap:.75rem; }
@keyframes fadeIn { from { opacity:0; } to { opacity:1; } }
@keyframes slideUp { from { opacity:0; transform:translateY(20px); } to { opacity:1; transform:translateY(0); } }
.settings-header { display:flex; align-items:center; justify-content:space-between; margin-bottom:.5rem; }
.settings-header h2 { margin:0; font-size:1.5rem; font-weight:800; letter-spacing:-.5px; }
.inline-switch { margin:0; gap:.4rem; font-size:.75rem; }
.inline-switch .theme-label { font-weight:600; opacity:.7; }
.modal-panel h2 { margin:0 0 .5rem; font-size:1.5rem; font-weight:800; letter-spacing:-.5px; }
.setting-row { display:flex; flex-direction:column; gap:.6rem; padding:.5rem 0; }
.toggle-row { font-size:.9rem; display:flex; align-items:center; gap:.7rem; cursor:pointer; -webkit-user-select:none; user-select:none; }
.toggle-row input[type=checkbox] { width:1.3rem; height:1.3rem; cursor:pointer; accent-color:var(--accent); }
.small-label { font-size:.75rem; opacity:.65; letter-spacing:.3px; text-transform:uppercase; font-weight:600; margin-bottom:.25rem; display:block; }
.text-input { width:100%; padding:.8rem .95rem; border-radius:var(--radius-lg); background:var(--input-bg); color:var(--fg); border:1px solid var(--input-border); font-size:.95rem; font-family:inherit; transition:border-color .2s ease, background .2s ease; }
.text-input:focus { outline:none; border-color:var(--accent); }
.text-input.date-compact { width:12.5rem; }
.select-input { -webkit-appearance:none; -moz-appearance:none; appearance:none; background-image:linear-gradient(45deg,transparent 50%,var(--accent) 50%),linear-gradient(135deg,var(--accent) 50%,transparent 50%); background-position:calc(100% - 18px) calc(50% - 2px),calc(100% - 13px) calc(50% - 2px); background-size:5px 5px,5px 5px; background-repeat:no-repeat; padding-right:2.75rem; }
.preview.small { font-size:.8rem; opacity:.55; margin-top:.25rem; font-weight:500; }
.mt-half { margin-top:.5rem; }
.btn { border:none; cursor:pointer; font-weight:700; border-radius:var(--radius-lg); padding:.85rem 1.2rem; font-size:.9rem; display:inline-flex; align-items:center; justify-content:center; gap:.5rem; transition:all .2s ease; font-family:inherit; }
.btn:active { transform:scale(.97); }
.btn.full { width:100%; }
.btn.accent { background:var(--accent); color:#fff; }
.btn.accent:hover { filter:brightness(.92); }
.btn.primary { background:var(--income); color:#000; font-weight:900; }
.btn.primary:hover { filter:brightness(.92); }
.btn.danger { background:var(--expense); color:#fff; }
.btn.danger:hover { filter:brightness(.92); }
.btn.ghost { background:rgba(255,255,255,.12); color:var(--fg); }
.btn.ghost:hover { background:rgba(255,255,255,.18); }
.btn.small { padding:.55rem .85rem; font-size:.75rem; }
.btn:disabled { opacity:.35; pointer-events:none; cursor:not-allowed; }
.confirm-row { display:flex; align-items:center; gap:.7rem; font-size:.8rem; flex-wrap:wrap; margin-top:.25rem; }
.sheet { position:fixed; inset:0; z-index:40; animation:fadeIn .2s ease; }
.sheet-overlay { position:absolute; inset:0; background:rgba(0,0,0,.65); cursor:pointer; }
.sheet-panel { position:absolute; left:0; right:0; bottom:0; background:var(--sheet-bg); border-top:1px solid var(--panel-border); border-radius:30px 30px 0 0; padding:1.2rem 1.5rem calc(2rem + env(safe-area-inset-bottom)); display:flex; flex-direction:column; gap:1.2rem; box-shadow:0 -10px 40px rgba(0,0,0,.5); animation:slideUpSheet .3s cubic-bezier(.4,0,.2,1); max-height:85vh; overflow-y:auto; }
@keyframes slideUpSheet { from { transform:translateY(100%); } to { transform:translateY(0); } }
.sheet-grabber { width:45px; height:5px; margin:0 auto .5rem; border-radius:999px; background:rgba(255,255,255,.25); }
html.theme-light .btn.ghost { background:rgba(0,0,0,.08); }
html.theme-light .btn.ghost:hover { background:rgba(0,0,0,.12); }
html.theme-light .sheet-grabber { background:rgba(0,0,0,.2); }
.amount-display { font-size:clamp(3.5rem, 10vw, 5rem); font-weight:900; text-align:center; font-variant-numeric:tabular-nums; letter-spacing:-2px; padding:.5rem 1rem; cursor:pointer; -webkit-user-select:none; user-select:none; min-height:5rem; display:flex; align-items:center; justify-content:center; }
.category-container, .name-container { display:flex; flex-direction:column; gap:.45rem; }
.name-container input:disabled { opacity:.5; cursor:not-allowed; }
.suggestion-row { display:flex; flex-wrap:wrap; gap:.35rem; }
.suggestion-row:empty { display:none; }
.suggestion-row[hidden] { display:none !important; }
.suggestion-chip { border:1px solid var(--panel-border); border-radius:999px; padding:.3rem .85rem; font-size:.8rem; font-weight:600; background:rgba(255,255,255,.05); color:var(--fg); cursor:pointer; transition:.2s ease; }
.suggestion-chip:hover, .suggestion-chip:focus { background:var(--panel); border-color:var(--accent); outline:none; }
.name-container .suggestion-chip { opacity:.85; }
.note-container { padding:.25rem 0; }
.note-container textarea { width:100%; height:95px; resize:none; padding:.9rem 1rem; border-radius:var(--radius-lg); background:var(--input-bg); border:1px solid var(--input-border); color:var(--fg); font-size:.9rem; font-family:inherit; line-height:1.5; transition:border-color .2s ease, background .2s ease; }
.note-container textarea:focus { outline:none; border-color:var(--accent); }
.date-edit { display:none; flex-direction:column; gap:.45rem; }
.sheet-panel[data-mode="edit"] .date-edit { display:flex; }
.date-edit input { width:auto; min-width:220px; max-width:100%; align-self:flex-start; text-align:center; }
.type-filter-card {
  width:100%;
  margin:0 auto 1rem;
  padding:1.1rem 1.3rem 1.45rem;
  border-radius:var(--radius-xl);
  border:2px solid var(--accent);
  background:var(--panel);
  box-shadow:0 16px 32px rgba(0,0,0,.25);
}
html.theme-light .type-filter-card { box-shadow:0 12px 24px rgba(0,0,0,.12); }
.type-filters {
  display:grid;
  grid-template-columns:1fr 0.6fr 1fr;
  gap:.55rem;
  margin:0;
}
.type-pill {
  border:2px solid var(--panel-border);
  border-radius:999px;
  padding:.65rem .95rem;
  font-weight:700;
  font-size:.9rem;
  cursor:pointer;
  background:transparent;
  color:var(--fg);
  transition:background .2s ease, color .2s ease, border-color .2s ease, transform .2s ease;
  width:100%;
  text-align:center;
  position:relative;
  overflow:visible;
}
.type-pill:active { transform:scale(.97); }
.type-pill[data-type="income"] { color:var(--income); border-color:var(--income-outline); background:var(--income-tint); }
.type-pill[data-type="all"] { color:var(--accent); border-color:var(--all-outline); background:var(--all-tint); }
.type-pill[data-type="expense"] { color:var(--expense); border-color:var(--expense-outline); background:var(--expense-tint); }
.type-pill::after {
  content:"";
  position:absolute;
  width:8px;
  height:8px;
  border-radius:50%;
  bottom:-12px;
  left:50%;
  transform:translateX(-50%);
  opacity:0;
  transition:opacity .2s ease;
  background:transparent;
}
.type-pill.active[data-type="income"] { background:var(--income); color:#000; border-color:var(--income); }
.type-pill.active[data-type="all"] { background:var(--accent); color:#fff; border-color:var(--accent); }
.type-pill.active[data-type="expense"] { background:var(--expense); color:#fff; border-color:var(--expense); }
.type-pill.active::after { opacity:1; background:#fff; }
html.theme-light .type-pill.active::after { background:#000; }
.chip-row { display:flex; gap:.5rem; overflow-x:auto; padding:0 1.3rem; margin:0 0 .75rem; }
.chip-row::-webkit-scrollbar { display:none; }
.chip { border:1px solid var(--panel-border); border-radius:999px; padding:.35rem .9rem; font-size:.8rem; font-weight:600; background:var(--panel); color:var(--fg); cursor:pointer; white-space:nowrap; transition:.2s ease; }
.chip.active { background:var(--accent); color:#fff; border-color:var(--accent); }
#screen-graph {
  --graph-bar-stack: clamp(4.2rem, 10vw, 5rem);
  --graph-notch-left: env(safe-area-inset-left, 0px);
  --graph-notch-right: env(safe-area-inset-right, 0px);
  padding:0 clamp(1rem, 3vw, 2rem) calc(3.5rem + env(safe-area-inset-bottom, 0px));
  background:radial-gradient(circle at 15% 20%, rgba(101,128,255,.14), transparent 45%),
             radial-gradient(circle at 85% -10%, rgba(48,214,164,.14), transparent 40%),
             var(--bg);
}
.graph-top-bar {
  position:fixed;
  top:0;
  left:0;
  right:0;
  padding:calc(env(safe-area-inset-top, 0px) + .6rem) clamp(1rem, 4vw, 2rem) .6rem;
  padding-left:calc(var(--graph-notch-left) + clamp(1rem, 4vw, 2rem));
  padding-right:calc(var(--graph-notch-right) + clamp(1rem, 4vw, 2rem));
  background:rgba(4,5,18,.95);
  border-bottom:1px solid rgba(255,255,255,.08);
  box-shadow:0 12px 26px rgba(0,0,0,.5);
  -webkit-backdrop-filter:blur(16px);
  backdrop-filter:blur(16px);
  display:flex;
  align-items:center;
  justify-content:space-between;
  flex-wrap:wrap;
  gap:.9rem;
  z-index:25;
}
.graph-top-bar::before,
.graph-top-bar::after {
  content:"";
  position:absolute;
  top:0;
  bottom:0;
  width:var(--graph-notch-left);
  background:#000;
  pointer-events:none;
}
.graph-top-bar::after {
  width:var(--graph-notch-right);
  right:0;
}
.graph-top-bar::before { left:0; }
.graph-top-left { display:flex; flex-direction:column; gap:.15rem; min-width:180px; }
.graph-eyebrow { font-size:.65rem; letter-spacing:1.1px; text-transform:uppercase; font-weight:700; opacity:.6; }
.graph-title { margin:0; font-size:1.15rem; letter-spacing:-.2px; }
.graph-hint { font-size:.7rem; font-weight:600; opacity:.45; }
.graph-control-stack { display:flex; align-items:center; gap:.55rem; flex-wrap:wrap; justify-content:flex-end; }
.graph-control-stack > * { flex:0 0 auto; }
.graph-view-toggle {
  display:flex;
  align-items:center;
  gap:.6rem;
  padding:.25rem .55rem;
  border-radius:999px;
  background:rgba(255,255,255,.04);
  border:1px solid rgba(255,255,255,.15);
}
.graph-view-toggle label {
  display:flex;
  align-items:center;
  gap:.25rem;
  font-size:.75rem;
  font-weight:700;
  cursor:pointer;
}
.graph-view-toggle input { accent-color:var(--accent); }
#graphTypeFilters.graph-type-filters {
  display:flex;
  flex-wrap:nowrap;
  gap:.45rem;
  margin:0;
  min-width:220px;
}
#graphTypeFilters .graph-type-pill { flex:1; padding:.65rem .9rem; }
.graph-body {
  width:100%;
  max-width:1200px;
  margin:0 auto;
  padding-top:calc(var(--graph-bar-stack) + env(safe-area-inset-top, 0px) + 1.4rem);
  display:flex;
  flex-wrap:wrap;
  gap:1.75rem;
  align-items:flex-start;
  justify-content:center;
}
.graph-body .graph-canvas-wrap { flex:1 1 360px; max-width:540px; }
.graph-legend-panel {
  flex:0 0 280px;
  max-width:340px;
  min-height:260px;
  padding:1.1rem 1.3rem;
  border-radius:24px;
  background:rgba(9,9,22,.92);
  border:1px solid rgba(255,255,255,.08);
  box-shadow:0 16px 35px rgba(0,0,0,.45);
}
.graph-legend-panel::before {
  content:"Breakdown";
  display:block;
  font-size:.8rem;
  letter-spacing:.6px;
  text-transform:uppercase;
  font-weight:700;
  opacity:.55;
  margin-bottom:.65rem;
}
.graph-body .graph-legend { width:100%; justify-content:flex-start; padding:0; }
.graph-body .graph-legend .graph-legend-item { width:100%; justify-content:flex-start; }
@media (max-width: 920px){
  .graph-control-stack { justify-content:flex-start; }
  #graphTypeFilters.graph-type-filters { flex:1 1 100%; }
  .graph-legend-panel { flex:1 1 100%; }
}
.graph-filter-card {
  width:100%;
  margin:0 auto 1.2rem;
  padding:1.2rem 1.4rem;
  border-radius:var(--radius-xl);
  border:2px solid var(--panel-border);
  background:var(--panel);
  box-shadow:0 18px 36px rgba(0,0,0,.25);
  display:flex;
  flex-direction:column;
  gap:1rem;
}
.graph-type-filters {
  display:grid;
  grid-template-columns:repeat(2,minmax(0,1fr));
  gap:.6rem;
}
.graph-type-pill {
  border-radius:999px;
  border:2px solid var(--panel-border);
  padding:.8rem 1rem;
  font-weight:700;
  background:rgba(255,255,255,.05);
  color:var(--fg);
  cursor:pointer;
  transition:.2s ease;
}
.graph-type-pill[data-graph-type="income"] { color:var(--income); border-color:var(--income-outline); background:var(--income-tint); }
.graph-type-pill[data-graph-type="expense"] { color:var(--expense); border-color:var(--expense-outline); background:var(--expense-tint); }
.graph-type-pill.active[data-graph-type="income"] { background:var(--income); color:#000; border-color:var(--income); }
.graph-type-pill.active[data-graph-type="expense"] { background:var(--expense); color:#fff; border-color:var(--expense); }
.graph-legend { display:flex; flex-wrap:wrap; gap:.75rem; padding:0 1.3rem 1rem; }
.graph-legend-item { display:flex; align-items:center; gap:.4rem; font-size:.8rem; font-weight:600; background:rgba(255,255,255,.04); border:1px solid var(--panel-border); border-radius:999px; padding:.35rem .8rem; white-space:nowrap; }
.legend-dot { width:.65rem; height:.65rem; border-radius:50%; flex-shrink:0; }
.graph-canvas-wrap { width:100%; max-width:520px; margin:0 auto; display:flex; align-items:center; justify-content:center; position:relative; min-height:300px; }
#graphCanvas { width:100%; height:auto; max-width:420px; }
.graph-empty { position:absolute; inset:0; display:flex; align-items:center; justify-content:center; text-align:center; font-size:.9rem; font-weight:600; opacity:.7; }
.group-summary {
  margin:0 auto 1rem;
  padding:1.1rem 1.3rem;
  border-radius:var(--radius-xl);
  background:var(--panel);
  border:2px solid var(--accent);
  font-weight:700;
  display:flex;
  justify-content:space-between;
  align-items:center;
  width:100%;
  box-shadow:0 16px 32px rgba(0,0,0,.25);
}
html.theme-light .group-summary { box-shadow:0 12px 28px rgba(0,0,0,.12); }
.group-summary .label { font-size:.9rem; }
.group-summary .sum { font-size:1rem; font-variant-numeric:tabular-nums; }
.hidden-input { position:absolute; left:-9999px; width:1px; height:1px; opacity:0; }
.fade-in { animation:fade .3s ease; }
@keyframes fade { from { opacity:0; transform:translateY(10px);} to { opacity:1; transform:translateY(0);} }
@keyframes historyFlash {
  0%, 100% { box-shadow:0 0 0 0 rgba(101,128,255,0); }
  25%, 75% { box-shadow:0 0 0 6px rgba(101,128,255,0.45); }
  50% { box-shadow:0 0 0 0 rgba(101,128,255,0); }
}
@keyframes recentPressFlash {
  0% { transform:scale(1); box-shadow:0 0 0 0 rgba(255,255,255,0); }
  50% { transform:scale(0.97); box-shadow:0 0 0 6px rgba(255,255,255,0.18); }
  100% { transform:scale(1); box-shadow:0 0 0 0 rgba(255,255,255,0); }
}
.empty { text-align:center; padding:4rem 2rem 2rem; opacity:.5; font-size:.95rem; }
/* Small visual for toggle label spacing (keeps aligned with other toggles) */
.toggle-row input[type=checkbox] { margin-right: .6rem; }

/* Switch control styles for theme toggle */
.toggle-row.switch { align-items:center; }
.toggle-row.switch input[type=checkbox] { position:absolute; opacity:0; width:0; height:0; }
.switch-ui {
  --sw:56px;
  --sh:28px;
  width:var(--sw);
  height:var(--sh);
  border-radius:999px;
  background:rgba(255,255,255,.15);
  border:0;
  position:relative;
  box-sizing:border-box;
  flex:0 0 auto;
  transition:background .2s ease;
  box-shadow:inset 0 0 0 1px rgba(255,255,255,.08);
}
.switch-ui { position:relative; }
.switch-ui::after {
  content: '';
  position: absolute;
  left: 0;
  top: 50%;
  width: var(--sh);
  height: var(--sh);
  border-radius: 50%;
  background: #fff;
  box-shadow: 0 2px 6px rgba(0,0,0,.32);
  transform: translateY(-50%);
  transition: transform .18s cubic-bezier(.2,.9,.2,1), background .12s ease;
}
.toggle-row.switch input[type=checkbox]:checked + .switch-ui { background:var(--accent); }
.toggle-row.switch input[type=checkbox]:checked + .switch-ui::after { transform: translate(calc(var(--sw) - var(--sh)), -50%); }
.toggle-row.switch span:last-child { margin-left:.8rem; }

.advanced-group { display:flex; flex-direction:column; gap:.6rem; }
